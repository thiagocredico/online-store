{"ast":null,"code":"var _jsxFileName = \"/home/thiago/projetos-trybe/sd-029-a-project-frontend-online-store/src/pages/Product.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { getProductById } from '../services/api';\nimport ButtonCart from '../components/ButtonCart';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Product extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      product: [],\n      cart: JSON.parse(localStorage.getItem('cart')) || []\n    };\n    this.addCart = product => {\n      const {\n        cart\n      } = this.state;\n      const itens = cart.find(item => item.id === product.id);\n      if (itens) {\n        itens.quantity += 1;\n      } else {\n        cart.push({\n          ...product,\n          quantity: 1\n        });\n      }\n      localStorage.setItem('cart', JSON.stringify(cart));\n      this.setState({\n        cart\n      });\n    };\n    this.handleGetProductId = async () => {\n      const {\n        match: {\n          params: {\n            id\n          }\n        }\n      } = this.props;\n      const data = await getProductById(id);\n      // console.log(data);\n      this.setState({\n        product: data\n      });\n    };\n  }\n  componentDidMount() {\n    this.handleGetProductId();\n  }\n  render() {\n    const {\n      product\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"product-detail-name\",\n        children: product.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        \"data-testid\": \"product-detail-image\",\n        src: product.thumbnail,\n        alt: product.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": \"product-detail-price\",\n        children: `R$${product.price}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ButtonCart, {\n        onClick: () => this.addCart(product)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/shopCart\",\n          \"data-testid\": \"shopping-cart-button\",\n          children: \"Carrinho\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n}\nProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string\n    })\n  }).isRequired\n};","map":{"version":3,"names":["React","Component","PropTypes","Link","getProductById","ButtonCart","Product","state","product","cart","JSON","parse","localStorage","getItem","addCart","itens","find","item","id","quantity","push","setItem","stringify","setState","handleGetProductId","match","params","props","data","componentDidMount","render","title","thumbnail","price","propTypes","shape","string","isRequired"],"sources":["/home/thiago/projetos-trybe/sd-029-a-project-frontend-online-store/src/pages/Product.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport { getProductById } from '../services/api';\nimport ButtonCart from '../components/ButtonCart';\n\nexport default class Product extends Component {\n  state = {\n    product: [],\n    cart: JSON.parse(localStorage.getItem('cart')) || [],\n  };\n\n  componentDidMount() {\n    this.handleGetProductId();\n  }\n\n  addCart = (product) => {\n    const { cart } = this.state;\n    const itens = cart.find((item) => item.id === product.id);\n    if (itens) {\n      itens.quantity += 1;\n    } else {\n      cart.push({ ...product, quantity: 1 });\n    }\n    localStorage.setItem('cart', JSON.stringify(cart));\n    this.setState({ cart });\n  };\n\n  handleGetProductId = async () => {\n    const { match: { params: { id } } } = this.props;\n    const data = await getProductById(id);\n    // console.log(data);\n    this.setState({ product: data });\n  };\n\n  render() {\n    const { product } = this.state;\n    return (\n      <section>\n        <p data-testid=\"product-detail-name\">{product.title}</p>\n        <img\n          data-testid=\"product-detail-image\"\n          src={ product.thumbnail }\n          alt={ product.title }\n        />\n        <p data-testid=\"product-detail-price\">{`R$${product.price}`}</p>\n        <ButtonCart\n          onClick={ () => this.addCart(product) }\n        />\n        <button type=\"button\">\n          <Link\n            to=\"/shopCart\"\n            data-testid=\"shopping-cart-button\"\n          >\n            Carrinho\n          </Link>\n        </button>\n      </section>\n    );\n  }\n}\n\nProduct.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,cAAc,QAAQ,iBAAiB;AAChD,OAAOC,UAAU,MAAM,0BAA0B;AAAC;AAElD,eAAe,MAAMC,OAAO,SAASL,SAAS,CAAC;EAAA;IAAA;IAAA,KAC7CM,KAAK,GAAG;MACNC,OAAO,EAAE,EAAE;MACXC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI;IACpD,CAAC;IAAA,KAMDC,OAAO,GAAIN,OAAO,IAAK;MACrB,MAAM;QAAEC;MAAK,CAAC,GAAG,IAAI,CAACF,KAAK;MAC3B,MAAMQ,KAAK,GAAGN,IAAI,CAACO,IAAI,CAAEC,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKV,OAAO,CAACU,EAAE,CAAC;MACzD,IAAIH,KAAK,EAAE;QACTA,KAAK,CAACI,QAAQ,IAAI,CAAC;MACrB,CAAC,MAAM;QACLV,IAAI,CAACW,IAAI,CAAC;UAAE,GAAGZ,OAAO;UAAEW,QAAQ,EAAE;QAAE,CAAC,CAAC;MACxC;MACAP,YAAY,CAACS,OAAO,CAAC,MAAM,EAAEX,IAAI,CAACY,SAAS,CAACb,IAAI,CAAC,CAAC;MAClD,IAAI,CAACc,QAAQ,CAAC;QAAEd;MAAK,CAAC,CAAC;IACzB,CAAC;IAAA,KAEDe,kBAAkB,GAAG,YAAY;MAC/B,MAAM;QAAEC,KAAK,EAAE;UAAEC,MAAM,EAAE;YAAER;UAAG;QAAE;MAAE,CAAC,GAAG,IAAI,CAACS,KAAK;MAChD,MAAMC,IAAI,GAAG,MAAMxB,cAAc,CAACc,EAAE,CAAC;MACrC;MACA,IAAI,CAACK,QAAQ,CAAC;QAAEf,OAAO,EAAEoB;MAAK,CAAC,CAAC;IAClC,CAAC;EAAA;EArBDC,iBAAiB,GAAG;IAClB,IAAI,CAACL,kBAAkB,EAAE;EAC3B;EAqBAM,MAAM,GAAG;IACP,MAAM;MAAEtB;IAAQ,CAAC,GAAG,IAAI,CAACD,KAAK;IAC9B,oBACE;MAAA,wBACE;QAAG,eAAY,qBAAqB;QAAA,UAAEC,OAAO,CAACuB;MAAK;QAAA;QAAA;QAAA;MAAA,QAAK,eACxD;QACE,eAAY,sBAAsB;QAClC,GAAG,EAAGvB,OAAO,CAACwB,SAAW;QACzB,GAAG,EAAGxB,OAAO,CAACuB;MAAO;QAAA;QAAA;QAAA;MAAA,QACrB,eACF;QAAG,eAAY,sBAAsB;QAAA,UAAG,KAAIvB,OAAO,CAACyB,KAAM;MAAC;QAAA;QAAA;QAAA;MAAA,QAAK,eAChE,QAAC,UAAU;QACT,OAAO,EAAG,MAAM,IAAI,CAACnB,OAAO,CAACN,OAAO;MAAG;QAAA;QAAA;QAAA;MAAA,QACvC,eACF;QAAQ,IAAI,EAAC,QAAQ;QAAA,uBACnB,QAAC,IAAI;UACH,EAAE,EAAC,WAAW;UACd,eAAY,sBAAsB;UAAA,UACnC;QAED;UAAA;UAAA;UAAA;QAAA;MAAO;QAAA;QAAA;QAAA;MAAA,QACA;IAAA;MAAA;MAAA;MAAA;IAAA,QACD;EAEd;AACF;AAEAF,OAAO,CAAC4B,SAAS,GAAG;EAClBT,KAAK,EAAEvB,SAAS,CAACiC,KAAK,CAAC;IACrBT,MAAM,EAAExB,SAAS,CAACiC,KAAK,CAAC;MACtBjB,EAAE,EAAEhB,SAAS,CAACkC;IAChB,CAAC;EACH,CAAC,CAAC,CAACC;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}