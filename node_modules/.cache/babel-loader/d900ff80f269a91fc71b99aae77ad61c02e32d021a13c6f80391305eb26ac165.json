{"ast":null,"code":"var _jsxFileName = \"/home/thiago/projetos-trybe/sd-029-a-project-frontend-online-store/src/pages/Home.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport ListCategories from '../components/ListCategories';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Home extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      cart: JSON.parse(localStorage.getItem('cart')) || [],\n      inputRadio: '',\n      products: [],\n      inputValue: 'games',\n      search: 'games',\n      clickBtn: false\n    };\n    this.updateCartQuantity = () => {\n      const cart = JSON.parse(localStorage.getItem('cart'));\n      const totalQuantity = cart.reduce((acc, curr) => acc + curr.quantity, 0);\n      localStorage.setItem('cartQuantity', JSON.stringify(totalQuantity));\n    };\n    this.addCart = product => {\n      const {\n        cart\n      } = this.state;\n      const itens = cart.find(item => item.id === product.id);\n      if (itens) {\n        itens.quantity += 1;\n      } else {\n        cart.push({\n          ...product,\n          quantity: 1\n        });\n      }\n      localStorage.setItem('cart', JSON.stringify(cart));\n      this.updateCartQuantity();\n      this.setState({\n        cart\n      });\n    };\n    this.handleChange = _ref => {\n      let {\n        target\n      } = _ref;\n      const {\n        name,\n        value\n      } = target;\n      this.setState({\n        [name]: value\n      }, () => {\n        if (name === 'inputRadio') {\n          this.handleInputRadio();\n        }\n      });\n    };\n    this.handleGetProducts = async () => {\n      const {\n        inputValue,\n        inputRadio\n      } = this.state;\n      this.setState({\n        search: inputValue\n      });\n      const getProducts = await getProductsFromCategoryAndQuery(inputRadio, inputValue);\n      this.setState({\n        products: getProducts.results,\n        inputValue: ''\n      });\n    };\n    this.handleInputRadio = async () => {\n      const {\n        search,\n        inputRadio\n      } = this.state;\n      const getProducts = await getProductsFromCategoryAndQuery(inputRadio, search);\n      this.setState({\n        products: getProducts.results\n      });\n    };\n  }\n  render() {\n    const {\n      products,\n      inputRadio,\n      inputValue,\n      clickBtn\n    } = this.state;\n    // const { products } = this.props;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"\",\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"flex flex-row h-screen\",\n          children: [/*#__PURE__*/_jsxDEV(ListCategories, {\n            inputRadio: inputRadio,\n            handleChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex- justify-center flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"\",\n              \"data-testid\": \"query-input\",\n              value: inputValue,\n              name: \"inputValue\",\n              onChange: this.handleChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn\",\n              type: \"button\",\n              \"data-testid\": \"query-button\",\n              onClick: this.handleGetProducts,\n              children: \"Pesquisar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), !clickBtn && /*#__PURE__*/_jsxDEV(\"p\", {\n            \"data-testid\": \"home-initial-message\",\n            children: \"Digite algum termo de pesquisa ou escolha uma categoria.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n            className: \"flex flex-wrap\",\n            children: products.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Nenhum produto foi encontrado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 40\n            }, this) : products.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card w-96 bg-base-200 shadow-xl m-4\",\n              // title={ product.title }\n              // thumbnail={ product.thumbnail}\n              // price={ product.price }\n              \"data-testid\": \"product\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                className: \"content-center object-fit\",\n                src: product.thumbnail.replace(/\\w\\.jpg/gi, 'W.jpg'),\n                alt: product.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-title\",\n                  children: product.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: `R$${product.price}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 25\n                }, this), product.shipping.free_shipping && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"badge badge-secondary\",\n                  \"data-testid\": \"free-shipping\",\n                  children: \"Frete G\\xE1tis\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(Link, {\n                  \"data-testid\": \"product-detail-link\",\n                  className: \"badge badge-accent\",\n                  to: `/product/${product.id}`,\n                  children: \"Detalhes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"card-actions justify-end\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-primary\",\n                    type: \"button\",\n                    \"data-testid\": \"product-add-to-cart\",\n                    onClick: () => this.addCart(product),\n                    children: \"Adicionar ao Carrinho\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 23\n              }, this)]\n            }, product.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true);\n  }\n}","map":{"version":3,"names":["React","Component","Link","Header","ListCategories","getProductsFromCategoryAndQuery","Home","state","cart","JSON","parse","localStorage","getItem","inputRadio","products","inputValue","search","clickBtn","updateCartQuantity","totalQuantity","reduce","acc","curr","quantity","setItem","stringify","addCart","product","itens","find","item","id","push","setState","handleChange","target","name","value","handleInputRadio","handleGetProducts","getProducts","results","render","length","map","thumbnail","replace","title","price","shipping","free_shipping"],"sources":["/home/thiago/projetos-trybe/sd-029-a-project-frontend-online-store/src/pages/Home.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport ListCategories from '../components/ListCategories';\nimport { getProductsFromCategoryAndQuery } from '../services/api';\n\nexport default class Home extends Component {\n  state = {\n    cart: JSON.parse(localStorage.getItem('cart')) || [],\n    inputRadio: '',\n    products: [],\n    inputValue: 'games',\n    search: 'games',\n    clickBtn: false,\n  };\n\n  // componentDidMount() {\n  //   this.handleGetProducts();\n  // }\n\n  updateCartQuantity = () => {\n    const cart = JSON.parse(localStorage.getItem('cart'));\n    const totalQuantity = cart.reduce((acc, curr) => acc + curr.quantity, 0);\n    localStorage.setItem('cartQuantity', JSON.stringify(totalQuantity));\n  };\n\n  addCart = (product) => {\n    const { cart } = this.state;\n    const itens = cart.find((item) => item.id === product.id);\n    if (itens) {\n      itens.quantity += 1;\n    } else {\n      cart.push({ ...product, quantity: 1 });\n    }\n    localStorage.setItem('cart', JSON.stringify(cart));\n    this.updateCartQuantity();\n    this.setState({ cart });\n  };\n\n  handleChange = ({ target }) => {\n    const { name, value } = target;\n    this.setState({ [name]: value }, () => {\n      if (name === 'inputRadio') {\n        this.handleInputRadio();\n      }\n    });\n  };\n\n  handleGetProducts = async () => {\n    const { inputValue, inputRadio } = this.state;\n    this.setState({ search: inputValue });\n    const getProducts = await getProductsFromCategoryAndQuery(inputRadio, inputValue);\n    this.setState({\n      products: getProducts.results,\n      inputValue: '',\n    });\n  };\n\n  handleInputRadio = async () => {\n    const { search, inputRadio } = this.state;\n    const getProducts = await getProductsFromCategoryAndQuery(inputRadio, search);\n    this.setState({ products: getProducts.results });\n  };\n\n  render() {\n    const { products, inputRadio, inputValue, clickBtn } = this.state;\n    // const { products } = this.props;\n    return (\n      <>\n        <Header />\n        <div\n          className=\"\"\n        >\n          <section className=\"flex flex-row h-screen\">\n            <ListCategories\n              inputRadio={ inputRadio }\n              handleChange={ this.handleChange }\n            />\n            {/* <ButtonCart /> */}\n            <div\n              className=\"flex flex- justify-center flex-wrap\"\n            >\n              <input\n                className=\"\"\n                data-testid=\"query-input\"\n                value={ inputValue }\n                name=\"inputValue\"\n                onChange={ this.handleChange }\n              />\n              <button\n                className=\"btn\"\n                type=\"button\"\n                data-testid=\"query-button\"\n                onClick={ this.handleGetProducts }\n              >\n                Pesquisar\n              </button>\n            </div>\n            {!clickBtn\n          && (\n            <p\n              data-testid=\"home-initial-message\"\n            >\n              Digite algum termo de pesquisa ou escolha uma categoria.\n            </p>) }\n            {/* <Card products={ products } /> */}\n            <section className=\"flex flex-wrap\">\n              {products.length === 0 ? <p>Nenhum produto foi encontrado</p>\n                : (\n                  products.map((product) => (\n                    <div\n                      className=\"card w-96 bg-base-200 shadow-xl m-4\"\n                      key={ product.id }\n                      // title={ product.title }\n                      // thumbnail={ product.thumbnail}\n                      // price={ product.price }\n                      data-testid=\"product\"\n                    >\n                      <img\n                        className=\"content-center object-fit\"\n                        src={ product.thumbnail.replace(/\\w\\.jpg/gi, 'W.jpg') }\n                        alt={ product.title }\n                      />\n                      <div className=\"card-body\">\n\n                        <p className=\"card-title\">{product.title}</p>\n                        <p>{`R$${product.price}`}</p>\n                        {\n                          product.shipping.free_shipping\n                          && (\n                            <p\n                              className=\"badge badge-secondary\"\n                              data-testid=\"free-shipping\"\n                            >\n                              Frete GÃ¡tis\n                            </p>\n                          )\n                        }\n                        <Link\n                          data-testid=\"product-detail-link\"\n                          className=\"badge badge-accent\"\n                          to={ `/product/${product.id}` }\n                        >\n                          Detalhes\n\n                        </Link>\n                        <div className=\"card-actions justify-end\">\n                          <button\n                            className=\"btn btn-primary\"\n                            type=\"button\"\n                            data-testid=\"product-add-to-cart\"\n                            onClick={ () => this.addCart(product) }\n                          >\n                            Adicionar ao Carrinho\n                          </button>\n                        </div>\n\n                      </div>\n                    </div>)))}\n            </section>\n          </section>\n        </div>\n\n      </>\n    );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}